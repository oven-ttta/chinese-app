# ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ Chinese App

## ‚úÖ ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î

### 1. Frontend (Add Word Page) - ‚úÖ ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

**‡πÑ‡∏ü‡∏•‡πå:** `src/app/add/page.js`

- ‚úÖ ‡∏°‡∏µ DatePicker ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà
- ‚úÖ ‡∏°‡∏µ Dropdown ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (‡πÇ‡∏≠, ‡πÄ‡∏≠‡∏¢, ‡πÇ‡∏à, ‡πÅ‡∏ö‡∏°, ‡πÄ‡∏ö‡∏•)
- ‚úÖ ‡∏°‡∏µ File Upload ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GIF
- ‚úÖ ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏î‡∏≥ (text-gray-900) ‡∏ó‡∏∏‡∏Å input
- ‚úÖ Placeholder ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡πâ‡∏° (placeholder:text-gray-500)

### 2. API Route (Add) - ‚úÖ ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

**‡πÑ‡∏ü‡∏•‡πå:** `src/app/api/add/route.js`

- ‚úÖ ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: char, pinyin, thai, tone, meaning, contributor, date, strokeOrderGif
- ‚úÖ Upload GIF ‡πÑ‡∏õ MinIO (timeout 20s)
- ‚úÖ ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ Google Sheet ‡∏û‡∏£‡πâ‡∏≠‡∏°: contributor, image (URL), date
- ‚úÖ ‡∏°‡∏µ Error Handling ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô
- ‚úÖ ‡∏°‡∏µ Logging ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Debug

### 3. API Route (Words) - ‚úÖ ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

**‡πÑ‡∏ü‡∏•‡πå:** `src/app/api/words/route.js`

- ‚úÖ ‡∏≠‡πà‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Google Sheet (gid=2116654352)
- ‚úÖ ‡πÅ‡∏õ‡∏•‡∏á CSV ‡πÄ‡∏õ‡πá‡∏ô JSON
- ‚úÖ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 8 columns: char, pinyin, thai, tone, meaning, contributor, strokeOrderGifUrl, date

### 4. WordCard Component - ‚úÖ ‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

**‡πÑ‡∏ü‡∏•‡πå:** `src/components/WordCard.js`

- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á Stroke Order GIF (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
- ‚úÖ ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏≠‡πà‡∏≤‡∏ô‡∏Ñ‡∏≥‡∏†‡∏≤‡∏©‡∏≤‡∏à‡∏µ‡∏ô
- ‚úÖ ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô

### 5. Google Apps Script - ‚ö†Ô∏è ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á

**‡πÑ‡∏ü‡∏•‡πå:** `google-apps-script-code.js`

- ‚úÖ Code ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö 8 columns)
- ‚ö†Ô∏è **‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á Deploy ‡πÉ‡∏´‡∏°‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á**

---

## üîß ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Google Apps Script (‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏°‡∏≤‡∏Å!)

1. ‡πÄ‡∏õ‡∏¥‡∏î https://script.google.com/
2. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
3. **‡∏•‡∏ö Code ‡πÄ‡∏î‡∏¥‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î** ‡πÅ‡∏•‡πâ‡∏ß‡∏ß‡∏≤‡∏á Code ‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå `google-apps-script-code.js` (‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î 1-37)
4. ‡∏Å‡∏î **Deploy** ‚Üí **New deployment**
5. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Type: **Web app**
6. ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤:
   - Description: "Version 4 Complete"
   - Execute as: **Me** (‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì)
   - Who has access: **Anyone** ‚ö†Ô∏è ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏•‡∏∑‡∏≠‡∏Å "Anyone with Google Account"
7. ‡∏Å‡∏î **Deploy**
8. **Copy URL** ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ (‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡πâ‡∏ô‡∏î‡πâ‡∏ß‡∏¢ https://script.google.com/macros/s/...)

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 2: ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï URL ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î

‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `src/app/api/add/route.js` ‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡∏ó‡∏µ‡πà 65:

```javascript
// ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å URL ‡πÄ‡∏Å‡πà‡∏≤
const GOOGLE_SCRIPT_URL =
  "https://script.google.com/macros/s/AKfycbzqUzv6hfUgEdDvacvKCKOxQ742J01JMnk1YhiN601u2HEOLuEnofyhNToqgXmeZuUvZw/exec";

// ‡πÄ‡∏õ‡πá‡∏ô URL ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì Copy ‡∏°‡∏≤
const GOOGLE_SCRIPT_URL = "URL_‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà_1";
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 3: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Environment Variables

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.env.local` (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ) ‡πÉ‡∏™‡πà:

```env
MINIO_ENABLED=true
MINIO_ENDPOINT=minio.ovenx.shop
MINIO_ACCESS_KEY=admin
MINIO_SECRET_KEY=admin1234
MINIO_SECURE=true
MINIO_BUCKET_NAME=image
```

### ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 4: Restart Server

```bash
# ‡∏´‡∏¢‡∏∏‡∏î server ‡πÄ‡∏î‡∏¥‡∏° (Ctrl+C)
npm run dev
```

---

## üìä ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö

### ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î "‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å" (Save):

1. ‚úÖ Frontend ‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• 8 ‡∏ä‡∏¥‡πâ‡∏ô
2. ‚úÖ ‡∏™‡πà‡∏á‡πÑ‡∏õ `/api/add`
3. ‚úÖ API Upload GIF ‡πÑ‡∏õ MinIO ‚Üí ‡πÑ‡∏î‡πâ URL
4. ‚úÖ API ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÑ‡∏õ Google Script
5. ‚úÖ Google Script ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏•‡∏á Sheet (8 columns)
6. ‚úÖ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏≤‡∏Å‡∏è‡πÉ‡∏ô Sheet

### Column Mapping:

- A: ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏à‡∏µ‡∏ô (char)
- B: ‡∏û‡∏¥‡∏ô‡∏≠‡∏¥‡∏ô (pinyin)
- C: ‡∏Ñ‡∏≥‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ó‡∏¢ (thai)
- D: ‡∏ß‡∏£‡∏£‡∏ì‡∏¢‡∏∏‡∏Å‡∏ï‡πå (tone)
- E: ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢ (meaning)
- F: ‡∏ú‡∏π‡πâ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å (contributor)
- G: ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (image URL)
- H: ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà (date)

---

## üêõ ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

### ‡∏ñ‡πâ‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• F, G, H ‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å:

‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤ **Google Script ‡∏¢‡∏±‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏Å‡πà‡∏≤** ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ó‡∏≥‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1-2 ‡πÉ‡∏´‡∏°‡πà

### ‡∏ñ‡πâ‡∏≤ MinIO Upload ‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß:

‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö `.env.local` ‡πÅ‡∏•‡∏∞ credentials
‚Üí ‡∏î‡∏π‡πÉ‡∏ô Terminal ‡∏à‡∏∞‡∏°‡∏µ log "MinIO Upload Error"

### ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏î Error 502:

‚Üí ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Google Script Deployment:

- Execute as: Me ‚úÖ
- Who has access: Anyone ‚úÖ

---

## ‚ú® ‡∏™‡∏£‡∏∏‡∏õ

**‡∏ó‡∏∏‡∏Å‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß**

‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡πÄ‡∏û‡∏µ‡∏¢‡∏á **1 ‡∏™‡∏¥‡πà‡∏á** ‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏î‡πâ‡∏ß‡∏¢‡∏ï‡∏ô‡πÄ‡∏≠‡∏á:
‚Üí **Deploy Google Apps Script ‡πÉ‡∏´‡∏°‡πà** ‡∏ï‡∏≤‡∏°‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà 1-2

‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå 100% ‡∏Ñ‡∏£‡∏±‡∏ö! üéâ
